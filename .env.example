# Copy this file to .env and fill in the values.
# See README.md for full environment variable documentation.

# Required
TELEGRAM_BOT_TOKEN=

# Optional: restrict bot to a single Telegram user ID
ALLOWED_USER_ID=

# Webhook security (optional; if empty, no HMAC/Basic Auth verification)
# WEEBHOOK_* supported for backward compatibility
WEBHOOK_KEY=
WEBHOOK_USERNAME=
WEBHOOK_PASSWORD=

# Optional: set to true/1 for Telegram test environment
TELEGRAM_TEST_ENV=

# Optional: server port (default 3000)
# PORT=3000

# Optional: debug, info, warn, error (default info)
# LOG_LEVEL=info
# SUBSCRIPTION_MIN_SEVERITY=info (optional: info, warning, alert - filter by severity)
# QUIET_HOURS_START=22:00 (optional - no notifications during quiet hours)
# QUIET_HOURS_END=08:00
# NOTIFICATION_GROUP_WINDOW_SECONDS=0 (optional - group similar events, 0=disabled)
# TELEGRAM_WEBHOOK_URL= (optional - use webhook instead of polling, e.g. https://example.com/telegram-webhook)
# EVENTS_RETENTION_DAYS=0 (optional - purge events older than X days, 0=disabled)
# ADMIN_USER_IDS= (optional - comma-separated Telegram user IDs for admin commands; if empty, ALLOWED_USER_ID is admin)
# DEFAULT_LOCALE=en (optional: en, fr, de, es, it)
# DEFAULT_TIMEZONE=UTC (optional: e.g. Europe/Paris, America/New_York)
# HEALTH_ALERT_USER_IDS= (optional - comma-separated IDs to notify when /health returns degraded)
# METRICS_PROTECTED=false (optional - when true, /metrics requires Basic Auth like dashboard)
# Per-event IP allowlist: no notification when the source IP (remoteIp) is in the list. Format: 1.1.1.1,1.2.2.2
# One variable per event type (replace . with _ in uppercase + _IGNORED_IPS). Examples:
# AUTH_SUCCESS_IGNORED_IPS=1.1.1.1,1.2.2.2
# AUTH_FAILED_IGNORED_IPS=
# SECURITY_ABUSE_BAN_IGNORED_IPS=
# SECURITY_IP_BLOCKED_IGNORED_IPS=
# (others: AUTH_ERROR_, DELIVERY_COMPLETED_, DELIVERY_DELIVERED_, DELIVERY_FAILED_, SECURITY_AUTHENTICATION_BAN_, SERVER_STARTUP_, SERVER_STARTUP_ERROR_)
# Example (comma-separated IPs; leave empty to not allowlist):
AUTH_SUCCESS_IGNORED_IPS=
# Notification deduplication (avoid duplicates for same event/IP)
# DEDUP_ENABLED=true
# DEDUP_WINDOW_SECONDS=60

# File storage (when DATABASE_USE=false)
# SUBSCRIPTIONS_FILE= (default: subscriptions.json; Docker: /app/data/subscriptions.json)
# User preferences (locale, timezone) are stored in the same file under __preferences key

# Database (MariaDB/MySQL) - store events, blocked IPs, whitelisted IPs, subscriptions
# DATABASE_USE=false    -> no database (default)
# DATABASE_USE=true     -> use database when DATABASE is set
# DATABASE=mariadb      -> use MariaDB
# DATABASE=mysql        -> use MySQL
# DATABASE_USE=
# DATABASE=
# DATABASE_HOST=localhost
# DATABASE_PORT=3306
# DATABASE_NAME=stalwart_bot
# DATABASE_USER=stalwart
# DATABASE_PASSWORD=
